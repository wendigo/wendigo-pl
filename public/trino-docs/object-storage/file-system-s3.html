


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="file-system-gcs.html">
      
      
        <link rel="next" href="file-system-local.html">
      
      
      <link rel="icon" href="">
    
    
      
        <title>S3 file system support - Trino 476-SNAPSHOT Documentation</title>
      
    
    
      
        
      
      


    
    
      
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.96fe8683ff2bd71e9.min.css?v=13adf062" />
        <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
        <link rel="stylesheet" type="text/css" href="../_static/trino.css?v=c5cc3cca" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Trino 476-SNAPSHOT Documentation" class="md-header__button md-logo" aria-label="Trino 476-SNAPSHOT Documentation" data-md-component="logo">
      <img src="../_static/trino.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Trino 476-SNAPSHOT Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              S3 file system support
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/trinodb/trino" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    Trino
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Trino 476-SNAPSHOT Documentation" class="md-nav__button md-logo" aria-label="Trino 476-SNAPSHOT Documentation" data-md-component="logo">
      <img src="../_static/trino.svg" alt="logo">
    </a>
    Trino 476-SNAPSHOT Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/trinodb/trino" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    Trino
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../client.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clients
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../security.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../admin.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Administration
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimizer.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query optimizer
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../connector.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connectors
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../object-storage.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Object storage
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Object storage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="file-system-azure.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Azure Storage file system support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="file-system-gcs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Google Cloud Storage file system support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      <a href="#" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    S3 file system support
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="file-system-local.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Local file system support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="file-system-hdfs.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HDFS file system support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="file-system-cache.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    File system cache
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="file-system-alluxio.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alluxio file system support
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="metastores.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metastores
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="file-formats.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Object storage file formats
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../functions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functions and operators
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../udf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User-<wbr>defined functions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../language.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SQL language
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../sql.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SQL statement syntax
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../develop.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossary.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Appendix
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../release.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release notes
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                
                
                  


<h1 id="s3-file-system-support">S3 file system support<a class="headerlink" href="#s3-file-system-support" title="Link to this heading">#</a></h1>
<p>Trino includes a native implementation to access <a class="reference external" href="https://aws.amazon.com/s3/">Amazon
S3</a> and compatible storage systems with a catalog
using the Delta Lake, Hive, Hudi, or Iceberg connectors. While Trino is designed
to support S3-compatible storage systems, only AWS S3 and MinIO are tested for
compatibility. For other storage systems, perform your own testing and consult
your vendor for more information.</p>
<p>Enable the native implementation with <code class="docutils literal notranslate"><span class="pre">fs.native-s3.enabled=true</span></code> in your
catalog properties file.</p>
<h2 id="general-configuration">General configuration<a class="headerlink" href="#general-configuration" title="Link to this heading">#</a></h2>
<p>Use the following properties to configure general aspects of S3 file system
support:</p>
<table class="docutils data align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fs.native-s3.enabled</span></code></p></td>
<td><p>Activate the native implementation for S3 storage support. Defaults to
<code class="docutils literal notranslate"><span class="pre">false</span></code>. Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to use S3 and enable all other properties.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.endpoint</span></code></p></td>
<td><p>Required endpoint URL for S3.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.region</span></code></p></td>
<td><p>Required region name for S3.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.path-style-access</span></code></p></td>
<td><p>Use path-style access for all requests to S3</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.storage-class</span></code></p></td>
<td><p>S3 storage class to use while writing data. Defaults to <code class="docutils literal notranslate"><span class="pre">STANDARD</span></code>. Other allowed
values are: <code class="docutils literal notranslate"><span class="pre">STANDARD_IA</span></code>, <code class="docutils literal notranslate"><span class="pre">INTELLIGENT_TIERING</span></code>, <code class="docutils literal notranslate"><span class="pre">REDUCED_REDUNDANCY</span></code>, <code class="docutils literal notranslate"><span class="pre">ONEZONE_IA</span></code>,
<code class="docutils literal notranslate"><span class="pre">GLACIER</span></code>, <code class="docutils literal notranslate"><span class="pre">DEEP_ARCHIVE</span></code>, <code class="docutils literal notranslate"><span class="pre">OUTPOSTS</span></code>, <code class="docutils literal notranslate"><span class="pre">GLACIER_IR</span></code>, <code class="docutils literal notranslate"><span class="pre">SNOW</span></code>, <code class="docutils literal notranslate"><span class="pre">EXPRESS_ONEZONE</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.exclusive-create</span></code></p></td>
<td><p>Whether conditional write is supported by the S3-compatible storage. Defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.canned-acl</span></code></p></td>
<td><p><a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/acl-overview.html#canned-acl">Canned ACL</a>
to use when uploading files to S3. Defaults to <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, which has the same
effect as <code class="docutils literal notranslate"><span class="pre">PRIVATE</span></code>. If the files are to be uploaded to an S3 bucket owned
by a different AWS user, the canned ACL may be set to one of the following:
<code class="docutils literal notranslate"><span class="pre">PRIVATE</span></code>, <code class="docutils literal notranslate"><span class="pre">PUBLIC_READ</span></code>, <code class="docutils literal notranslate"><span class="pre">PUBLIC_READ_WRITE</span></code>, <code class="docutils literal notranslate"><span class="pre">AUTHENTICATED_READ</span></code>,
<code class="docutils literal notranslate"><span class="pre">BUCKET_OWNER_READ</span></code>, or <code class="docutils literal notranslate"><span class="pre">BUCKET_OWNER_FULL_CONTROL</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.sse.type</span></code></p></td>
<td><p>Set the type of S3 server-side encryption (SSE) to use. Defaults to <code class="docutils literal notranslate"><span class="pre">NONE</span></code>
for no encryption. Other valid values are <code class="docutils literal notranslate"><span class="pre">S3</span></code> for encryption by S3 managed
keys, <code class="docutils literal notranslate"><span class="pre">KMS</span></code> for encryption with a key from the AWS Key Management
Service (KMS), and <code class="docutils literal notranslate"><span class="pre">CUSTOMER</span></code> for encryption with a customer-provided key
from <code class="docutils literal notranslate"><span class="pre">s3.sse.customer-key</span></code>. Note that S3 automatically uses SSE so <code class="docutils literal notranslate"><span class="pre">NONE</span></code>
and <code class="docutils literal notranslate"><span class="pre">S3</span></code> are equivalent. S3-compatible systems might behave differently.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.sse.kms-key-id</span></code></p></td>
<td><p>The identifier of a key in KMS to use for SSE.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.sse.customer-key</span></code></p></td>
<td><p>The 256-bit, base64-encoded AES-256 encryption key to encrypt or decrypt
data from S3 when using the SSE-C mode for SSE with <code class="docutils literal notranslate"><span class="pre">s3.sse.type</span></code> set to
<code class="docutils literal notranslate"><span class="pre">CUSTOMER</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.streaming.part-size</span></code></p></td>
<td><p>Part size for S3 streaming upload. Values between <code class="docutils literal notranslate"><span class="pre">5MB</span></code> and <code class="docutils literal notranslate"><span class="pre">256MB</span></code> are
valid. Defaults to <code class="docutils literal notranslate"><span class="pre">16MB</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.requester-pays</span></code></p></td>
<td><p>Switch to activate billing transfer cost to the requester. Defaults to
<code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.max-connections</span></code></p></td>
<td><p>Maximum number of connections to S3.  Defaults to <code class="docutils literal notranslate"><span class="pre">500</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.connection-ttl</span></code></p></td>
<td><p>Maximum time <a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">duration</span></a> allowed to reuse connections in
the connection pool before being replaced.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.connection-max-idle-time</span></code></p></td>
<td><p>Maximum time <a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">duration</span></a> allowed for connections to
remain idle in the connection pool before being closed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.socket-connect-timeout</span></code></p></td>
<td><p>Maximum time <a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">duration</span></a> allowed for socket connection
requests to complete before timing out.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.socket-read-timeout</span></code></p></td>
<td><p>Maximum time <a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">duration</span></a> for socket read operations
before timing out.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.tcp-keep-alive</span></code></p></td>
<td><p>Enable TCP keep alive on created connections. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy</span></code></p></td>
<td><p>URL of a HTTP proxy server to use for connecting to S3.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy.secure</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to enable HTTPS for the proxy server.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy.username</span></code></p></td>
<td><p>Proxy username to use if connecting through a proxy server.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy.password</span></code></p></td>
<td><p>Proxy password to use if connecting through a proxy server.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy.non-proxy-hosts</span></code></p></td>
<td><p>Hosts list to access without going through the proxy server.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy.preemptive-basic-auth</span></code></p></td>
<td><p>Whether to attempt to authenticate preemptively against proxy server
when using base authorization, defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.retry-mode</span></code></p></td>
<td><p>Specifies how the AWS SDK attempts retries. Default value is <code class="docutils literal notranslate"><span class="pre">LEGACY</span></code>.
Other allowed values are <code class="docutils literal notranslate"><span class="pre">STANDARD</span></code> and <code class="docutils literal notranslate"><span class="pre">ADAPTIVE</span></code>. The <code class="docutils literal notranslate"><span class="pre">STANDARD</span></code> mode
includes a standard set of errors that are retried. <code class="docutils literal notranslate"><span class="pre">ADAPTIVE</span></code> mode
includes the functionality of <code class="docutils literal notranslate"><span class="pre">STANDARD</span></code> mode with automatic client-side
throttling.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.max-error-retries</span></code></p></td>
<td><p>Specifies maximum number of retries the client will make on errors.
Defaults to <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.use-web-identity-token-credentials-provider</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to only use the web identity token credentials provider,
instead of the default providers chain. This can be useful when running
Trino on Amazon EKS and using <a class="reference external" href="https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html">IAM roles for service accounts
(IRSA)</a>
Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.application-id</span></code></p></td>
<td><p>Specify the application identifier appended to the <code class="docutils literal notranslate"><span class="pre">User-Agent</span></code> header
for all requests sent to S3. Defaults to <code class="docutils literal notranslate"><span class="pre">Trino</span></code>.</p></td>
</tr>
</tbody>
</table>
<h2 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Link to this heading">#</a></h2>
<p>Use the following properties to configure the authentication to S3 with access
and secret keys, STS, or an IAM role:</p>
<table class="docutils data align-default">
<colgroup>
<col style="width: 40.0%" />
<col style="width: 60.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.aws-access-key</span></code></p></td>
<td><p>AWS access key to use for authentication.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.aws-secret-key</span></code></p></td>
<td><p>AWS secret key to use for authentication.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.sts.endpoint</span></code></p></td>
<td><p>The endpoint URL of the AWS Security Token Service to use for authenticating
to S3.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.sts.region</span></code></p></td>
<td><p>AWS region of the STS service.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.iam-role</span></code></p></td>
<td><p>ARN of an IAM role to assume when connecting to S3.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.role-session-name</span></code></p></td>
<td><p>Role session name to use when connecting to S3. Defaults to
<code class="docutils literal notranslate"><span class="pre">trino-filesystem</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.external-id</span></code></p></td>
<td><p>External ID for the IAM role trust policy when connecting to S3.</p></td>
</tr>
</tbody>
</table>
<h2 id="security-mapping">Security mapping<a class="headerlink" href="#security-mapping" title="Link to this heading">#</a></h2>
<p>Trino supports flexible security mapping for S3, allowing for separate
credentials or IAM roles for specific users or S3 locations. The IAM role
for a specific query can be selected from a list of allowed roles by providing
it as an <em>extra credential</em>.</p>
<p>Each security mapping entry may specify one or more match criteria.
If multiple criteria are specified, all criteria must match.
The following match criteria are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">user</span></code>: Regular expression to match against username. Example: <code class="docutils literal notranslate"><span class="pre">alice|bob</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">group</span></code>: Regular expression to match against any of the groups that the user
belongs to. Example: <code class="docutils literal notranslate"><span class="pre">finance|sales</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prefix</span></code>: S3 URL prefix. You can specify an entire bucket or a path within a
bucket. The URL must start with <code class="docutils literal notranslate"><span class="pre">s3://</span></code> but also matches for <code class="docutils literal notranslate"><span class="pre">s3a</span></code> or <code class="docutils literal notranslate"><span class="pre">s3n</span></code>.
Example: <code class="docutils literal notranslate"><span class="pre">s3://bucket-name/abc/xyz/</span></code></p></li>
</ul>
<p>The security mapping must provide one or more configuration settings:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">accessKey</span></code> and <code class="docutils literal notranslate"><span class="pre">secretKey</span></code>: AWS access key and secret key. This overrides
any globally configured credentials, such as access key or instance credentials.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iamRole</span></code>: IAM role to use if no user provided role is specified as an
extra credential. This overrides any globally configured IAM role. This role
is allowed to be specified as an extra credential, although specifying it
explicitly has no effect.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">roleSessionName</span></code>: Optional role session name to use with <code class="docutils literal notranslate"><span class="pre">iamRole</span></code>. This can only
be used when <code class="docutils literal notranslate"><span class="pre">iamRole</span></code> is specified. If <code class="docutils literal notranslate"><span class="pre">roleSessionName</span></code> includes the string
<code class="docutils literal notranslate"><span class="pre">${USER}</span></code>, then the <code class="docutils literal notranslate"><span class="pre">${USER}</span></code> portion of the string is replaced with the
current session’s username. If <code class="docutils literal notranslate"><span class="pre">roleSessionName</span></code> is not specified, it defaults
to <code class="docutils literal notranslate"><span class="pre">trino-session</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allowedIamRoles</span></code>: IAM roles that are allowed to be specified as an extra
credential. This is useful because a particular AWS account may have permissions
to use many roles, but a specific user should only be allowed to use a subset
of those roles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kmsKeyId</span></code>: ID of KMS-managed key to be used for client-side encryption.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allowedKmsKeyIds</span></code>: KMS-managed key IDs that are allowed to be specified as an extra
credential. If list contains <code class="docutils literal notranslate"><span class="pre">*</span></code>, then any key can be specified via extra credential.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sseCustomerKey</span></code>: The customer provided key (SSE-C) for server-side encryption.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">allowedSseCustomerKey</span></code>: The SSE-C keys that are allowed to be specified as an extra
credential. If list contains <code class="docutils literal notranslate"><span class="pre">*</span></code>, then any key can be specified via extra credential.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">endpoint</span></code>: The S3 storage endpoint server. This optional property can be used
to override S3 endpoints on a per-bucket basis.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">region</span></code>: The S3 region to connect to. This optional property can be used
to override S3 regions on a per-bucket basis.</p></li>
</ul>
<p>The security mapping entries are processed in the order listed in the JSON configuration.
Therefore, specific mappings must be specified before less specific mappings.
For example, the mapping list might have URL prefix <code class="docutils literal notranslate"><span class="pre">s3://abc/xyz/</span></code> followed by
<code class="docutils literal notranslate"><span class="pre">s3://abc/</span></code> to allow different configuration for a specific path within a bucket
than for other paths within the bucket. You can specify the default configuration
by not including any match criteria for the last entry in the list.</p>
<p>In addition to the preceding rules, the default mapping can contain the optional
<code class="docutils literal notranslate"><span class="pre">useClusterDefault</span></code> boolean property set to <code class="docutils literal notranslate"><span class="pre">true</span></code> to use the default S3 configuration.
It cannot be used with any other configuration settings.</p>
<p>If no mapping entry matches and no default is configured, access is denied.</p>
<p>The configuration JSON is read from a file via <code class="docutils literal notranslate"><span class="pre">s3.security-mapping.config-file</span></code>
or from an HTTP endpoint via <code class="docutils literal notranslate"><span class="pre">s3.security-mapping.config-uri</span></code>.</p>
<p>Example JSON configuration:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;mappings&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;s3://bucket-name/abc/&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/test_path&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bob|charlie&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/test_default&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;allowedIamRoles&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;arn:aws:iam::123456789101:role/test1&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;arn:aws:iam::123456789101:role/test2&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;arn:aws:iam::123456789101:role/test3&quot;</span>
<span class="w">      </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;s3://special-bucket/&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;accessKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AKIAxxxaccess&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;secretKey&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;iXbXxxxsecret&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;s3://regional-bucket/&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/regional-user&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;endpoint&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://bucket.vpce-1a2b3c4d-5e6f.s3.us-east-1.vpce.amazonaws.com&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;region&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;us-east-1&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;prefix&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;s3://encrypted-bucket/&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;kmsKeyId&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;kmsKey_10&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;test.*&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/test_users&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;group&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;finance&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/finance_users&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;iamRole&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;arn:aws:iam::123456789101:role/default&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</div>
<table class="docutils data align-default" id="id1">
<caption><span class="caption-text">Security mapping properties</span><a class="headerlink" href="#id1" title="Link to this table">#</a></caption>
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.security-mapping.enabled</span></code></p></td>
<td><p>Activate the security mapping feature. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.
Must be set to <code class="docutils literal notranslate"><span class="pre">true</span></code> for all other properties be used.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.security-mapping.config-file</span></code></p></td>
<td><p>Path to the JSON configuration file containing security mappings.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.security-mapping.config-uri</span></code></p></td>
<td><p>HTTP endpoint URI containing security mappings.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.security-mapping.json-pointer</span></code></p></td>
<td><p>A JSON pointer (RFC 6901) to mappings inside the JSON retrieved from the
configuration file or HTTP endpoint. The default is the root of the document.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.security-mapping.iam-role-credential-name</span></code></p></td>
<td><p>The name of the <em>extra credential</em> used to provide the IAM role.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.security-mapping.kms-key-id-credential-name</span></code></p></td>
<td><p>The name of the <em>extra credential</em> used to provide the KMS-managed key ID.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.security-mapping.sse-customer-key-credential-name</span></code></p></td>
<td><p>The name of the <em>extra credential</em> used to provide the server-side encryption with customer-provided keys (SSE-C).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s3.security-mapping.refresh-period</span></code></p></td>
<td><p>How often to refresh the security mapping configuration, specified as a
<a class="reference internal" href="../admin/properties.html#prop-type-duration"><span class="std std-ref">duration</span></a>. By default, the configuration is not refreshed.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">s3.security-mapping.colon-replacement</span></code></p></td>
<td><p>The character or characters to be used instead of a colon character
when specifying an IAM role name as an extra credential.
Any instances of this replacement value in the extra credential value
are converted to a colon.
Choose a value not used in any of your IAM ARNs.</p></td>
</tr>
</tbody>
</table>
<h2 id="migration-from-legacy-s3-file-system"><span id="fs-legacy-s3-migration"></span>Migration from legacy S3 file system<a class="headerlink" href="#migration-from-legacy-s3-file-system" title="Link to this heading">#</a></h2>
<p>Trino includes legacy Amazon S3 support to use with a catalog using the Delta
Lake, Hive, Hudi, or Iceberg connectors. Upgrading existing deployments to the
current native implementation is recommended. Legacy support is deprecated and
will be removed.</p>
<p>To migrate a catalog to use the native file system implementation for S3, make
the following edits to your catalog configuration:</p>
<ol class="arabic simple">
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">fs.native-s3.enabled=true</span></code> catalog configuration property.</p></li>
<li><p>Refer to the following table to rename your existing legacy catalog
configuration properties to the corresponding native configuration
properties. Supported configuration values are identical unless otherwise
noted.</p></li>
</ol>
<table class="docutils data align-default">
<colgroup>
<col style="width: 25.9%" />
<col style="width: 25.9%" />
<col style="width: 48.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Legacy property</p></th>
<th class="head"><p>Native property</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.aws-access-key</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.aws-access-key</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.aws-secret-key</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.aws-secret-key</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.iam-role</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.iam-role</span></code></p></td>
<td><p>Also see <code class="docutils literal notranslate"><span class="pre">s3.role-session-name</span></code> in preceding sections
for more role configuration options.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.external-id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.external-id</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.endpoint</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.endpoint</span></code></p></td>
<td><p>Add the <code class="docutils literal notranslate"><span class="pre">https://</span></code> prefix to make the value a correct URL.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.region</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.region</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.sse.enabled</span></code></p></td>
<td><p>None</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.sse.type</span></code> set to the default value of <code class="docutils literal notranslate"><span class="pre">NONE</span></code> is equivalent to
<code class="docutils literal notranslate"><span class="pre">hive.s3.sse.enabled=false</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.sse.type</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.sse.type</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.sse.kms-key-id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.sse.kms-key-id</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.upload-acl-type</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.canned-acl</span></code></p></td>
<td><p>See preceding sections for supported values.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.streaming.part-size</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.streaming.part-size</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.proxy.host</span></code>, <code class="docutils literal notranslate"><span class="pre">hive.s3.proxy.port</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy</span></code></p></td>
<td><p>Specify the host and port in one URL, for example <code class="docutils literal notranslate"><span class="pre">localhost:8888</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.proxy.protocol</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy.secure</span></code></p></td>
<td><p>Set to <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> to enable HTTPS.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.proxy.non-proxy-hosts</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy.non-proxy-hosts</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.proxy.username</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy.username</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.proxy.password</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy.password</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.proxy.preemptive-basic-auth</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.http-proxy.preemptive-basic-auth</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.sts.endpoint</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.sts.endpoint</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.sts.region</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.sts.region</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.max-error-retries</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.max-error-retries</span></code></p></td>
<td><p>Also see <code class="docutils literal notranslate"><span class="pre">s3.retry-mode</span></code> in preceding sections for more retry behavior
configuration options.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.connect-timeout</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.socket-connect-timeout</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.connect-ttl</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.connection-ttl</span></code></p></td>
<td><p>Also see <code class="docutils literal notranslate"><span class="pre">s3.connection-max-idle-time</span></code> in preceding section for more
connection keep-alive options.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.socket-timeout</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.socket-read-timeout</span></code></p></td>
<td><p>Also see <code class="docutils literal notranslate"><span class="pre">s3.tcp-keep-alive</span></code> in preceding sections for more socket
connection keep-alive options.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.max-connections</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.max-connections</span></code></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hive.s3.path-style-access</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">s3.path-style-access</span></code></p></td>
<td></td>
</tr>
</tbody>
</table>
<ol class="arabic simple">
<li><p>Remove the following legacy configuration properties if they exist in your
catalog configuration:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.storage-class</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.signer-type</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.signer-class</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.staging-directory</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.pin-client-to-current-region</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.ssl.enabled</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.sse.enabled</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.kms-key-id</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.encryption-materials-provider</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.streaming.enabled</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.max-client-retries</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.max-backoff-time</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.max-retry-time</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.multipart.min-file-size</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.multipart.min-part-size</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3-file-system-type</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hive.s3.user-agent-prefix</span></code></p></li>
</ul>
</li>
</ol>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="file-system-gcs.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Google Cloud Storage file system support">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Google Cloud Storage file system support
              </div>
            </div>
          </a>
        
        
          
          <a href="file-system-local.html" class="md-footer__link md-footer__link--next" aria-label="Next: Local file system support">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Local file system support
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  
  
  <div class="md-footer-meta md-typeset">
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "content.tabs.link", "content.tooltipsnavigation.expand", "navigation.footer", "navigation.sections", "navigation.top", "navigation.tracking", "search.share", "search.suggest", "toc.integrate", "toc.follow"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike", "staticVersions": null, "versionPath": "../versions.json"}}</script>
    
      
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/sphinx_immaterial_theme.32136f45f91ae6956.min.js?v=a7a9472a"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    
  </body>
</html>