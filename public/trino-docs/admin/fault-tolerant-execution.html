


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="graceful-shutdown.html">
      
      
        <link rel="next" href="event-listeners-http.html">
      
      
      <link rel="icon" href="">
    
    
      
        <title>Fault-tolerant execution - Trino 476-SNAPSHOT Documentation</title>
      
    
    
      
        
      
      


    
    
      
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.96fe8683ff2bd71e9.min.css?v=13adf062" />
        <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
        <link rel="stylesheet" type="text/css" href="../_static/trino.css?v=c5cc3cca" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Trino 476-SNAPSHOT Documentation" class="md-header__button md-logo" aria-label="Trino 476-SNAPSHOT Documentation" data-md-component="logo">
      <img src="../_static/trino.svg" alt="logo">
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Trino 476-SNAPSHOT Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Fault-tolerant execution
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/trinodb/trino" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    Trino
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Trino 476-SNAPSHOT Documentation" class="md-nav__button md-logo" aria-label="Trino 476-SNAPSHOT Documentation" data-md-component="logo">
      <img src="../_static/trino.svg" alt="logo">
    </a>
    Trino 476-SNAPSHOT Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/trinodb/trino" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
  </div>
  <div class="md-source__repository">
    Trino
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../client.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Clients
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../security.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../admin.html" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Administration
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Administration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="web-interface.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Web UI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="preview-web-interface.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Preview Web UI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="logging.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="tuning.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tuning Trino
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="jmx.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Monitoring with JMX
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="opentelemetry.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Observability with Open<wbr>Telemetry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="openmetrics.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trino metrics with Open<wbr>Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="spill.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Spill to disk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="resource-groups.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Resource groups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="session-property-managers.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Session property managers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="dist-sort.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Distributed sort
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="dynamic-filtering.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dynamic filtering
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="graceful-shutdown.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Graceful shutdown
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      <a href="#" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Fault-<wbr>tolerant execution
    
  </span>
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="event-listeners-http.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    HTTP event listener
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="event-listeners-kafka.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka event listener
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="event-listeners-mysql.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    My<wbr>SQL event listener
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="event-listeners-openlineage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Open<wbr>Lineage event listener
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
  
    <li class="md-nav__item">
      <a href="properties.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Properties reference
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../optimizer.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query optimizer
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../connector.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connectors
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../object-storage.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Object storage
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../functions.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functions and operators
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../udf.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    User-<wbr>defined functions
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../language.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SQL language
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../sql.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SQL statement syntax
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../develop.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer guide
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossary.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../appendix.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Appendix
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
  
    <li class="md-nav__item">
      <a href="../release.html" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Release notes
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                
                
                  


<h1 id="fault-tolerant-execution">Fault-tolerant execution<a class="headerlink" href="#fault-tolerant-execution" title="Link to this heading">#</a></h1>
<p>By default, if a Trino node lacks the resources to execute a task or
otherwise fails during query execution, the query fails and must be run again
manually. The longer the runtime of a query, the more likely it is to be
susceptible to such failures.</p>
<p>Fault-tolerant execution is a mechanism in Trino that enables a cluster to
mitigate query failures by retrying queries or their component tasks in
the event of failure. With fault-tolerant execution enabled, intermediate
exchange data is spooled and can be re-used by another worker in the event of a
worker outage or other fault during query execution.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>Fault tolerance does not apply to broken queries or other user error. For
example, Trino does not spend resources retrying a query that fails because
its SQL cannot be parsed.</p>
<p>For a step-by-step guide explaining how to configure a Trino cluster with
fault-tolerant execution to improve query processing resilience, read
<a class="reference internal" href="../installation/query-resiliency.html"><span class="doc">Improve query processing resilience</span></a>.</p>
</div>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Link to this heading">#</a></h2>
<p>Fault-tolerant execution is turned off by default. To enable the feature, set the
<code class="docutils literal notranslate"><span class="pre">retry-policy</span></code> configuration property to either <code class="docutils literal notranslate"><span class="pre">QUERY</span></code> or <code class="docutils literal notranslate"><span class="pre">TASK</span></code>
depending on the desired <a class="reference internal" href="#fte-retry-policy"><span class="std std-ref">retry policy</span></a>.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><code><span class="na">retry-policy</span><span class="o">=</span><span class="s">QUERY</span>
</code></pre></div>
</div>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">retry-policy</span></code> may cause queries to fail with connectors that do not
explicitly support fault-tolerant execution, resulting in a “This connector
does not support query retries” error message.</p>
<p>Support for fault-tolerant execution of SQL statements varies on a
per-connector basis, with more details in the documentation for each
connector. The following connectors support fault-tolerant execution:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../connector/bigquery.html#bigquery-fte-support"><span class="std std-ref">BigQuery connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/delta-lake.html#delta-lake-fte-support"><span class="std std-ref">Delta Lake connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/hive.html#hive-fte-support"><span class="std std-ref">Hive connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/iceberg.html#iceberg-fte-support"><span class="std std-ref">Iceberg connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/mariadb.html#mariadb-fte-support"><span class="std std-ref">MariaDB connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/mongodb.html#mongodb-fte-support"><span class="std std-ref">MongoDB connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/mysql.html#mysql-fte-support"><span class="std std-ref">MySQL connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/oracle.html#oracle-fte-support"><span class="std std-ref">Oracle connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/postgresql.html#postgresql-fte-support"><span class="std std-ref">PostgreSQL connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/redshift.html#redshift-fte-support"><span class="std std-ref">Redshift connector</span></a></p></li>
<li><p><a class="reference internal" href="../connector/sqlserver.html#sqlserver-fte-support"><span class="std std-ref">SQL Server connector</span></a></p></li>
</ul>
</div>
<p>The following configuration properties control the behavior of fault-tolerant
execution on a Trino cluster:</p>
<table class="docutils data align-default" id="id2">
<caption><span class="caption-text">Fault-tolerant execution configuration properties</span><a class="headerlink" href="#id2" title="Link to this table">#</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 50.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">retry-policy</span></code></p></td>
<td><p>Configures what is retried in the event of failure, either <code class="docutils literal notranslate"><span class="pre">QUERY</span></code> to retry
the whole query, or <code class="docutils literal notranslate"><span class="pre">TASK</span></code> to retry tasks individually if they fail. See
<a class="reference internal" href="#fte-retry-policy"><span class="std std-ref">retry policy</span></a> for more information. Use the equivalent
session property <code class="docutils literal notranslate"><span class="pre">retry_policy</span></code> only on clusters configured for
fault-tolerant execution and typically only to deactivate with <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, since
switching between modes on a cluster is not tested.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.deduplication-buffer-size</span></code></p></td>
<td><p><a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">Data size</span></a> of the coordinator’s in-memory buffer used
by fault-tolerant execution to store output of query
<a class="reference internal" href="../overview/concepts.html#trino-concept-stage"><span class="std std-ref">stages</span></a>. If this buffer is filled during query
execution, the query fails with a “Exchange manager must be configured for
the failure recovery capabilities to be fully functional” error message unless an
<a class="reference internal" href="#fte-exchange-manager"><span class="std std-ref">exchange manager</span></a> is configured.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">32MB</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution.exchange-encryption-enabled</span></code></p></td>
<td><p>Enable encryption of spooling data, see <a class="reference internal" href="#fte-encryption"><span class="std std-ref">Encryption</span></a> for details.
Setting this property to false is not recommended if Trino processes sensitive data.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">true</span></code></p></td>
</tr>
</tbody>
</table>
<p>Find further related properties in <a class="reference internal" href="properties.html"><span class="doc std std-doc">Properties reference</span></a>, specifically in
<a class="reference internal" href="properties-resource-management.html"><span class="doc std std-doc">Resource management properties</span></a> and <a class="reference internal" href="properties-exchange.html"><span class="doc std std-doc">Exchange properties</span></a>.</p>
<h2 id="retry-policy"><span id="fte-retry-policy"></span>Retry policy<a class="headerlink" href="#retry-policy" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">retry-policy</span></code> configuration property, or the <code class="docutils literal notranslate"><span class="pre">retry_policy</span></code> session
property, designates whether Trino retries entire queries or a query’s
individual tasks in the event of failure.</p>
<h3 id="query">QUERY<a class="headerlink" href="#query" title="Link to this heading">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">QUERY</span></code> retry policy instructs Trino to automatically retry a query in the
event of an error occurring on a worker node. A <code class="docutils literal notranslate"><span class="pre">QUERY</span></code> retry policy is
recommended when the majority of the Trino cluster’s workload consists of many
small queries.</p>
<p>By default Trino does not implement fault tolerance for queries whose result set
exceeds 32MB in size, such as <a class="reference internal" href="../sql/select.html"><span class="doc">SELECT</span></a> statements that return a very
large data set to the user. This limit can be increased by modifying the
<code class="docutils literal notranslate"><span class="pre">exchange.deduplication-buffer-size</span></code> configuration property to be greater than
the default value of <code class="docutils literal notranslate"><span class="pre">32MB</span></code>, but this results in higher memory usage on the
coordinator.</p>
<p>To enable fault-tolerant execution on queries with a larger result set, it is
strongly recommended to configure an <a class="reference internal" href="#fte-exchange-manager"><span class="std std-ref">exchange manager</span></a> that utilizes external storage for spooled data and
therefore allows for storage of spilled data beyond the in-memory buffer size.</p>
<h3 id="task">TASK<a class="headerlink" href="#task" title="Link to this heading">#</a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">TASK</span></code> retry policy instructs Trino to retry individual query <a class="reference internal" href="../overview/concepts.html#trino-concept-task"><span class="std std-ref">tasks</span></a> in the event of failure. You must configure an
<a class="reference internal" href="#fte-exchange-manager"><span class="std std-ref">exchange manager</span></a> to use the task retry policy.
This policy is recommended when executing large batch queries, as the cluster
can more efficiently retry smaller tasks within the query rather than retry the
whole query.</p>
<p>When a cluster is configured with a <code class="docutils literal notranslate"><span class="pre">TASK</span></code> retry policy, some relevant
configuration properties have their default values changed to follow best
practices for a fault-tolerant cluster. However, this automatic change does not
affect clusters that have these properties manually configured. If you have
any of the following properties configured in the <code class="docutils literal notranslate"><span class="pre">config.properties</span></code> file on
a cluster with a <code class="docutils literal notranslate"><span class="pre">TASK</span></code> retry policy, it is strongly recommended to set the
<code class="docutils literal notranslate"><span class="pre">task.low-memory-killer.policy</span></code>
<a class="reference internal" href="properties-query-management.html"><span class="doc">query management property</span></a> to
<code class="docutils literal notranslate"><span class="pre">total-reservation-on-blocked-nodes</span></code>, or queries may need to be manually killed
if the cluster runs out of memory.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>A <code class="docutils literal notranslate"><span class="pre">TASK</span></code> retry policy is best suited for large batch queries, but this
policy can result in higher latency for short-running queries executed in high
volume. As a best practice, it is recommended to run a dedicated cluster
with a <code class="docutils literal notranslate"><span class="pre">TASK</span></code> retry policy for large batch queries, separate from another
cluster that handles short queries.</p>
</div>
<h2 id="encryption"><span id="fte-encryption"></span>Encryption<a class="headerlink" href="#encryption" title="Link to this heading">#</a></h2>
<p>Trino encrypts data before spooling it to storage. This prevents access to query
data by anyone besides the Trino cluster that wrote it, including administrators
of the storage system. A new encryption key is randomly generated for every
query, and the key is discarded once a query is completed.</p>
<h2 id="advanced-configuration">Advanced configuration<a class="headerlink" href="#advanced-configuration" title="Link to this heading">#</a></h2>
<p>You can further configure fault-tolerant execution with the following
configuration properties. The default values for these properties should work
for most deployments, but you can change these values for testing or
troubleshooting purposes.</p>
<h3 id="retry-limits">Retry limits<a class="headerlink" href="#retry-limits" title="Link to this heading">#</a></h3>
<p>The following configuration properties control the thresholds at which
queries/tasks are no longer retried in the event of repeated failures:</p>
<table class="docutils data align-default" id="id3">
<caption><span class="caption-text">Fault tolerance retry limit configuration properties</span><a class="headerlink" href="#id3" title="Link to this table">#</a></caption>
<colgroup>
<col style="width: 23.1%" />
<col style="width: 38.5%" />
<col style="width: 15.4%" />
<col style="width: 23.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default value</p></th>
<th class="head"><p>Retry policy</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">query-retry-attempts</span></code></p></td>
<td><p>Maximum number of times Trino may attempt to retry a query before declaring
the query as failed.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4</span></code></p></td>
<td><p>Only <code class="docutils literal notranslate"><span class="pre">QUERY</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">task-retry-attempts-per-task</span></code></p></td>
<td><p>Maximum number of times Trino may attempt to retry a single task before
declaring the query as failed.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4</span></code></p></td>
<td><p>Only <code class="docutils literal notranslate"><span class="pre">TASK</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">retry-initial-delay</span></code></p></td>
<td><p>Minimum <a class="reference internal" href="properties.html#prop-type-duration"><span class="std std-ref">time</span></a> that a failed query or task must wait
before it is retried. May be overridden with the <code class="docutils literal notranslate"><span class="pre">retry_initial_delay</span></code>
<a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">session property</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10s</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">QUERY</span></code> and <code class="docutils literal notranslate"><span class="pre">TASK</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">retry-max-delay</span></code></p></td>
<td><p>Maximum <a class="reference internal" href="properties.html#prop-type-duration"><span class="std std-ref">time</span></a> that a failed query or task must
wait before it is retried. Wait time is increased on each subsequent
failure. May be overridden with the <code class="docutils literal notranslate"><span class="pre">retry_max_delay</span></code> <a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">session
property</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1m</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">QUERY</span></code> and <code class="docutils literal notranslate"><span class="pre">TASK</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">retry-delay-scale-factor</span></code></p></td>
<td><p>Factor by which retry delay is increased on each query or task failure. May
be overridden with the <code class="docutils literal notranslate"><span class="pre">retry_delay_scale_factor</span></code> <a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">session
property</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2.0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">QUERY</span></code> and <code class="docutils literal notranslate"><span class="pre">TASK</span></code></p></td>
</tr>
</tbody>
</table>
<h3 id="task-sizing">Task sizing<a class="headerlink" href="#task-sizing" title="Link to this heading">#</a></h3>
<p>With a <code class="docutils literal notranslate"><span class="pre">TASK</span></code> retry policy, it is important to manage the amount of data
processed in each task. If tasks are too small, the management of task
coordination can take more processing time and resources than executing the task
itself. If tasks are too large, then a single task may require more resources
than are available on any one node and therefore prevent the query from
completing.</p>
<p>Trino supports limited automatic task sizing. If issues are occurring
during fault-tolerant task execution, you can configure the following
configuration properties to manually control task sizing. These configuration
properties only apply to a <code class="docutils literal notranslate"><span class="pre">TASK</span></code> retry policy.</p>
<table class="docutils data align-default" id="id4">
<caption><span class="caption-text">Task sizing configuration properties</span><a class="headerlink" href="#id4" title="Link to this table">#</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 50.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-standard-split-size</span></code></p></td>
<td><p>Standard <a class="reference internal" href="../overview/concepts.html#trino-concept-splits"><span class="std std-ref">split</span></a> <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a>
processed by tasks that read data from source tables. Value is interpreted
with split weight taken into account. If the weight of splits produced by a
catalog denotes that they are lighter or heavier than “standard” split, then
the number of splits processed by a single task is adjusted accordingly.</p>
<p>May be overridden for the current session with the
<code class="docutils literal notranslate"><span class="pre">fault_tolerant_execution_standard_split_size</span></code> <a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">session
property</span></a>.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">64MB</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-max-task-split-count</span></code></p></td>
<td><p>Maximum number of <a class="reference internal" href="../overview/concepts.html#trino-concept-splits"><span class="std std-ref">splits</span></a> processed by a single task.
This value is not split weight-adjusted and serves as protection against
situations where catalogs report an incorrect split weight.</p>
<p>May be overridden for the current session with the
<code class="docutils literal notranslate"><span class="pre">fault_tolerant_execution_max_task_split_count</span></code> <a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">session
property</span></a>.</p>
</td>
<td><p><code class="docutils literal notranslate"><span class="pre">2048</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-arbitrary-distribution-compute-task-target-size-growth-period</span></code></p></td>
<td><p>The number of tasks created for any given non-writer stage of arbitrary
distribution before task size is increased.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">64</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-arbitrary-distribution-compute-task-target-size-growth-factor</span></code></p></td>
<td><p>Growth factor for adaptive sizing of non-writer tasks of arbitrary
distribution for fault-tolerant execution. Lower bound is 1.0. For every
task size increase, new task target size is old task target size multiplied
by this growth factor.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.26</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-arbitrary-distribution-compute-task-target-size-min</span></code></p></td>
<td><p>Initial/minimum target input <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> for non-writer
tasks of arbitrary distribution of fault-tolerant execution.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">512MB</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-arbitrary-distribution-compute-task-target-size-max</span></code></p></td>
<td><p>Maximum target input <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> for each non-writer
task of arbitrary distribution of fault-tolerant execution.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">50GB</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-arbitrary-distribution-write-task-target-size-growth-period</span></code></p></td>
<td><p>The number of tasks created for any given writer stage of arbitrary
distribution before task size is increased.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">64</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-arbitrary-distribution-write-task-target-size-growth-factor</span></code></p></td>
<td><p>Growth factor for adaptive sizing of writer tasks of arbitrary distribution
for fault-tolerant execution. Lower bound is 1.0. For every task size
increase, new task target size is old task target size multiplied by this
growth factor.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1.26</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-arbitrary-distribution-write-task-target-size-min</span></code></p></td>
<td><p>Initial/minimum target input <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> for writer
tasks of arbitrary distribution of fault-tolerant execution.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4GB</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-arbitrary-distribution-write-task-target-size-max</span></code></p></td>
<td><p>Maximum target input <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> for writer tasks of
arbitrary distribution of fault-tolerant execution.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">50GB</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-hash-distribution-compute-task-target-size</span></code></p></td>
<td><p>Target input <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> for non-writer tasks of hash
distribution of fault-tolerant execution.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">512MB</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-hash-distribution-write-task-target-size</span></code></p></td>
<td><p>Target input <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> of writer tasks of hash
distribution of fault-tolerant execution.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4GB</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-hash-distribution-write-task-target-max-count</span></code></p></td>
<td><p>Soft upper bound on number of writer tasks in a stage of hash distribution
of fault-tolerant execution.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2000</span></code></p></td>
</tr>
</tbody>
</table>
<h3 id="node-allocation">Node allocation<a class="headerlink" href="#node-allocation" title="Link to this heading">#</a></h3>
<p>With a <code class="docutils literal notranslate"><span class="pre">TASK</span></code> retry policy, nodes are allocated to tasks based on available
memory and estimated memory usage. If task failure occurs due to exceeding
available memory on a node, the task is restarted with a request to allocate the
full node for its execution.</p>
<p>The initial task memory-requirements estimation is static and configured with
the <code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-task-memory</span></code> configuration property. This property only
applies to a <code class="docutils literal notranslate"><span class="pre">TASK</span></code> retry policy.</p>
<table class="docutils data align-default" id="id5">
<caption><span class="caption-text">Node allocation configuration properties</span><a class="headerlink" href="#id5" title="Link to this table">#</a></caption>
<colgroup>
<col style="width: 30.0%" />
<col style="width: 50.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-task-memory</span></code></p></td>
<td><p>Initial task memory <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> estimation
used for bin-packing when allocating nodes for tasks. May be overridden
for the current session with the
<code class="docutils literal notranslate"><span class="pre">fault_tolerant_execution_task_memory</span></code>
<a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">session property</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5GB</span></code></p></td>
</tr>
</tbody>
</table>
<h3 id="other-tuning">Other tuning<a class="headerlink" href="#other-tuning" title="Link to this heading">#</a></h3>
<p>The following additional configuration property can be used to manage
fault-tolerant execution:</p>
<table class="docutils data align-default" id="id6">
<caption><span class="caption-text">Other fault-tolerant execution configuration properties</span><a class="headerlink" href="#id6" title="Link to this table">#</a></caption>
<colgroup>
<col style="width: 23.1%" />
<col style="width: 38.5%" />
<col style="width: 15.4%" />
<col style="width: 23.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default value</p></th>
<th class="head"><p>Retry policy</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-task-descriptor-storage-max-memory</span></code></p></td>
<td><p>Maximum <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> of memory to be used to
store task descriptors for fault-tolerant queries on coordinator. Extra
memory is needed to be able to reschedule tasks in case of a failure.</p></td>
<td><p>(JVM heap size * 0.15)</p></td>
<td><p>Only <code class="docutils literal notranslate"><span class="pre">TASK</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-max-partition-count</span></code></p></td>
<td><p>Maximum number of partitions to use for distributed joins and aggregations,
similar in function to the <code class="docutils literal notranslate"><span class="pre">query.max-hash-partition-count</span></code> <a class="reference internal" href="properties-query-management.html"><span class="doc std std-doc">query
management property</span></a>. It is not
recommended to increase this property value higher than the default of <code class="docutils literal notranslate"><span class="pre">50</span></code>,
which may result in instability and poor performance. May be overridden for
the current session with the <code class="docutils literal notranslate"><span class="pre">fault_tolerant_execution_max_partition_count</span></code>
<a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">session property</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">50</span></code></p></td>
<td><p>Only <code class="docutils literal notranslate"><span class="pre">TASK</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-min-partition-count</span></code></p></td>
<td><p>Minimum number of partitions to use for distributed joins and aggregations,
similar in function to the <code class="docutils literal notranslate"><span class="pre">query.min-hash-partition-count</span></code> <a class="reference internal" href="properties-query-management.html"><span class="doc std std-doc">query
management property</span></a>. May be overridden
for the current session with the
<code class="docutils literal notranslate"><span class="pre">fault_tolerant_execution_min_partition_count</span></code> <a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">session
property</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4</span></code></p></td>
<td><p>Only <code class="docutils literal notranslate"><span class="pre">TASK</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">fault-tolerant-execution-min-partition-count-for-write</span></code></p></td>
<td><p>Minimum number of partitions to use for distributed joins and aggregations
in write queries, similar in function to the
<code class="docutils literal notranslate"><span class="pre">query.min-hash-partition-count-for-write</span></code> <a class="reference internal" href="properties-query-management.html"><span class="doc std std-doc">query management
property</span></a>. May be overridden for the
current session with the
<code class="docutils literal notranslate"><span class="pre">fault_tolerant_execution_min_partition_count_for_write</span></code> <a class="reference internal" href="../sql/set-session.html#session-properties-definition"><span class="std std-ref">session
property</span></a>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">50</span></code></p></td>
<td><p>Only <code class="docutils literal notranslate"><span class="pre">TASK</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">max-tasks-waiting-for-node-per-query</span></code></p></td>
<td><p>Allow for up to configured number of tasks to wait for node allocation
per query, before pausing scheduling for other tasks from this query.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">50</span></code></p></td>
<td><p>Only <code class="docutils literal notranslate"><span class="pre">TASK</span></code></p></td>
</tr>
</tbody>
</table>
<h2 id="exchange-manager"><span id="fte-exchange-manager"></span>Exchange manager<a class="headerlink" href="#exchange-manager" title="Link to this heading">#</a></h2>
<p>Exchange spooling is responsible for storing and managing spooled data for
fault-tolerant execution. You can configure a filesystem-based exchange manager
that stores spooled data in a specified location, such as <a class="reference internal" href="#fte-exchange-aws-s3"><span class="std std-ref">AWS S3</span></a> and S3-compatible systems, <a class="reference internal" href="#fte-exchange-azure-blob"><span class="std std-ref">Azure Blob Storage</span></a>, <a class="reference internal" href="#fte-exchange-gcs"><span class="std std-ref">Google Cloud Storage</span></a>,
or <a class="reference internal" href="#fte-exchange-hdfs"><span class="std std-ref">HDFS</span></a>.</p>
<h3 id="id1">Configuration<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<p>To configure an exchange manager, create a new
<code class="docutils literal notranslate"><span class="pre">etc/exchange-manager.properties</span></code> configuration file on the coordinator and
all worker nodes. In this file, set the <code class="docutils literal notranslate"><span class="pre">exchange-manager.name</span></code> configuration
property to <code class="docutils literal notranslate"><span class="pre">filesystem</span></code> or <code class="docutils literal notranslate"><span class="pre">hdfs</span></code>, and set additional configuration properties as needed
for your storage solution.</p>
<p>The following table lists the available configuration properties for
<code class="docutils literal notranslate"><span class="pre">exchange-manager.properties</span></code>, their default values, and which file systems
the property may be configured for:</p>
<table class="docutils data align-default" id="id7">
<caption><span class="caption-text">Exchange manager configuration properties</span><a class="headerlink" href="#id7" title="Link to this table">#</a></caption>
<colgroup>
<col style="width: 23.1%" />
<col style="width: 38.5%" />
<col style="width: 15.4%" />
<col style="width: 23.1%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Property name</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default value</p></th>
<th class="head"><p>Supported filesystem</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.base-directories</span></code></p></td>
<td><p>Comma-separated list of URI locations that the exchange manager uses to
store spooling data.</p></td>
<td></td>
<td><p>Any</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.sink-buffer-pool-min-size</span></code></p></td>
<td><p>The minimum buffer pool size for an exchange sink. The larger the buffer
pool size, the larger the write parallelism and memory usage.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10</span></code></p></td>
<td><p>Any</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.sink-buffers-per-partition</span></code></p></td>
<td><p>The number of buffers per partition in the buffer pool. The larger the
buffer pool size, the larger the write parallelism and memory usage.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">2</span></code></p></td>
<td><p>Any</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.sink-max-file-size</span></code></p></td>
<td><p>Max <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> of files written by exchange sinks.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">1GB</span></code></p></td>
<td><p>Any</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.source-concurrent-readers</span></code></p></td>
<td><p>Number of concurrent readers to read from spooling storage. The larger the
number of concurrent readers, the larger the read parallelism and memory
usage.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4</span></code></p></td>
<td><p>Any</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.s3.aws-access-key</span></code></p></td>
<td><p>AWS access key to use. Required for a connection to AWS S3 and GCS, can be
ignored for other S3 storage systems.</p></td>
<td></td>
<td><p>AWS S3, GCS</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.s3.aws-secret-key</span></code></p></td>
<td><p>AWS secret key to use. Required for a connection to AWS S3 and GCS, can be
ignored for other S3 storage systems.</p></td>
<td></td>
<td><p>AWS S3, GCS</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.s3.iam-role</span></code></p></td>
<td><p>IAM role to assume.</p></td>
<td></td>
<td><p>AWS S3, GCS</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.s3.external-id</span></code></p></td>
<td><p>External ID for the IAM role trust policy.</p></td>
<td></td>
<td><p>AWS S3, GCS</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.s3.region</span></code></p></td>
<td><p>Region of the S3 bucket.</p></td>
<td></td>
<td><p>AWS S3, GCS</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.s3.endpoint</span></code></p></td>
<td><p>S3 storage endpoint server if using an S3-compatible storage system that
is not AWS. If using AWS S3, this can be ignored unless HTTPS is required
by an AWS bucket policy. If TLS is required, then this property can be
set to an https endpoint such as <code class="docutils literal notranslate"><span class="pre">https://s3.us-east-1.amazonaws.com</span></code>.
Note that TLS is redundant due to <a class="reference internal" href="#fte-encryption"><span class="std std-ref">automatic encryption</span></a>.
If using GCS, set it to <code class="docutils literal notranslate"><span class="pre">https://storage.googleapis.com</span></code>.</p></td>
<td></td>
<td><p>Any S3-compatible storage</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.s3.max-error-retries</span></code></p></td>
<td><p>Maximum number of times the exchange manager’s S3 client should retry
a request.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10</span></code></p></td>
<td><p>Any S3-compatible storage</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.s3.path-style-access</span></code></p></td>
<td><p>Enables using <a class="reference external" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/VirtualHosting.html#path-style-access">path-style access</a>
for all requests to S3.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">false</span></code></p></td>
<td><p>Any S3-compatible storage</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.s3.upload.part-size</span></code></p></td>
<td><p>Part <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> for S3 multi-part upload.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">5MB</span></code></p></td>
<td><p>Any S3-compatible storage</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.gcs.json-key-file-path</span></code></p></td>
<td><p>Path to the JSON file that contains your Google Cloud Platform service
account key. Not to be set together with <code class="docutils literal notranslate"><span class="pre">exchange.gcs.json-key</span></code></p></td>
<td></td>
<td><p>GCS</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.gcs.json-key</span></code></p></td>
<td><p>Your Google Cloud Platform service account key in JSON format. Not to be set
together with <code class="docutils literal notranslate"><span class="pre">exchange.gcs.json-key-file-path</span></code></p></td>
<td></td>
<td><p>GCS</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.azure.endpoint</span></code></p></td>
<td><p>Azure blob endpoint used to access the spooling container. Not to be set
together with <code class="docutils literal notranslate"><span class="pre">exchange.azure.connection-string</span></code></p></td>
<td></td>
<td><p>Azure Blob Storage</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.azure.connection-string</span></code></p></td>
<td><p>Connection string used to access the spooling container. Not to be set
together with <code class="docutils literal notranslate"><span class="pre">exchange.azure.endpoint</span></code></p></td>
<td></td>
<td><p>Azure Blob Storage</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.azure.block-size</span></code></p></td>
<td><p>Block <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> for Azure block blob parallel upload.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4MB</span></code></p></td>
<td><p>Azure Blob Storage</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.azure.max-error-retries</span></code></p></td>
<td><p>Maximum number of times the exchange manager’s Azure client should
retry a request.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">10</span></code></p></td>
<td><p>Azure Blob Storage</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.hdfs.block-size</span></code></p></td>
<td><p>Block <a class="reference internal" href="properties.html#prop-type-data-size"><span class="std std-ref">data size</span></a> for HDFS storage.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">4MB</span></code></p></td>
<td><p>HDFS</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">exchange.hdfs.skip-directory-scheme-validation</span></code></p></td>
<td><p>Skip directory scheme validation to support Hadoop-compatible file system.</p></td>
<td><p>false</p></td>
<td><p>HDFS</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">hdfs.config.resources</span></code></p></td>
<td><p>Comma-separated list of paths to HDFS configuration files, for example
<code class="docutils literal notranslate"><span class="pre">/etc/hdfs-site.xml</span></code>. The files must exist on all nodes in the Trino
cluster.</p></td>
<td></td>
<td><p>HDFS</p></td>
</tr>
</tbody>
</table>
<p>To reduce the exchange manager’s overall I/O load, the
<a class="reference internal" href="properties-exchange.html#prop-exchange-compression-codec"><span class="std std-ref">exchange.compression-codec</span></a> configuration property defaults to <code class="docutils literal notranslate"><span class="pre">LZ4</span></code>. In
addition, <a class="reference internal" href="properties-general.html#file-compression"><span class="std std-ref">File compression and decompression</span></a> is automatically performed and some details can
be configured.</p>
<p>It is also recommended to configure a bucket lifecycle rule to automatically
expire abandoned objects in the event of a node crash.</p>
<h4 id="aws-s3"><span id="fte-exchange-aws-s3"></span>AWS S3<a class="headerlink" href="#aws-s3" title="Link to this heading">#</a></h4>
<p>The following example <code class="docutils literal notranslate"><span class="pre">exchange-manager.properties</span></code> configuration specifies an
AWS S3 bucket as the spooling storage destination. Note that the destination
does not have to be in AWS, but can be any S3-compatible storage system. While
the exchange manager is designed to support S3-compatible storage systems, only
AWS S3 and MinIO are tested for compatibility. For other storage systems,
perform your own testing and consult your vendor for more information.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><code><span class="na">exchange-manager.name</span><span class="o">=</span><span class="s">filesystem</span>
<span class="na">exchange.base-directories</span><span class="o">=</span><span class="s">s3://exchange-spooling-bucket</span>
<span class="na">exchange.s3.region</span><span class="o">=</span><span class="s">us-west-1</span>
<span class="na">exchange.s3.aws-access-key</span><span class="o">=</span><span class="s">example-access-key</span>
<span class="na">exchange.s3.aws-secret-key</span><span class="o">=</span><span class="s">example-secret-key</span>
</code></pre></div>
</div>
<p>You can configure multiple S3 buckets for the exchange manager to distribute
spooled data across buckets, reducing the I/O load on any one bucket. If a query
fails with the error message
“software.amazon.awssdk.services.s3.model.S3Exception: Please reduce your
request rate”, this indicates that the workload is I/O intensive, and you should
specify multiple S3 buckets in <code class="docutils literal notranslate"><span class="pre">exchange.base-directories</span></code> to balance the
load:</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><code><span class="na">exchange.base-directories</span><span class="o">=</span><span class="s">s3://exchange-spooling-bucket-1,s3://exchange-spooling-bucket-2</span>
</code></pre></div>
</div>
<h4 id="azure-blob-storage"><span id="fte-exchange-azure-blob"></span>Azure Blob Storage<a class="headerlink" href="#azure-blob-storage" title="Link to this heading">#</a></h4>
<p>The following example <code class="docutils literal notranslate"><span class="pre">exchange-manager.properties</span></code> configuration specifies an
Azure Blob Storage container as the spooling storage destination. You must use
Azure Blob Storage, not Azure Data Lake Storage or any other hierarchical
storage option in Azure.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><code><span class="na">exchange-manager.name</span><span class="o">=</span><span class="s">filesystem</span>
<span class="na">exchange.base-directories</span><span class="o">=</span><span class="s">abfs://container_name@account_name.dfs.core.windows.net</span>
<span class="na">exchange.azure.connection-string</span><span class="o">=</span><span class="s">connection-string</span>
</code></pre></div>
</div>
<h4 id="google-cloud-storage"><span id="fte-exchange-gcs"></span>Google Cloud Storage<a class="headerlink" href="#google-cloud-storage" title="Link to this heading">#</a></h4>
<p>To enable exchange spooling on GCS in Trino, change the request endpoint to the
<code class="docutils literal notranslate"><span class="pre">https://storage.googleapis.com</span></code> Google storage URI, and configure your AWS
access/secret keys to use the GCS HMAC keys. If you deploy Trino on GCP, you
must either create a service account with access to your spooling bucket or
configure the key path to your GCS credential file.</p>
<p>For more information on GCS’s S3 compatibility, refer to the <a class="reference external" href="https://cloud.google.com/storage/docs/aws-simple-migration">Google Cloud
documentation on S3 migration</a>.</p>
<p>The following example <code class="docutils literal notranslate"><span class="pre">exchange-manager.properties</span></code> configuration specifies a
GCS bucket as the spooling storage destination.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><code><span class="na">exchange-manager.name</span><span class="o">=</span><span class="s">filesystem</span>
<span class="na">exchange.base-directories</span><span class="o">=</span><span class="s">gs://exchange-spooling-bucket</span>
<span class="na">exchange.s3.region</span><span class="o">=</span><span class="s">us-west-1</span>
<span class="na">exchange.s3.aws-access-key</span><span class="o">=</span><span class="s">example-access-key</span>
<span class="na">exchange.s3.aws-secret-key</span><span class="o">=</span><span class="s">example-secret-key</span>
<span class="na">exchange.s3.endpoint</span><span class="o">=</span><span class="s">https://storage.googleapis.com</span>
<span class="na">exchange.gcs.json-key-file-path</span><span class="o">=</span><span class="s">/path/to/gcs_keyfile.json</span>
</code></pre></div>
</div>
<h4 id="hdfs"><span id="fte-exchange-hdfs"></span>HDFS<a class="headerlink" href="#hdfs" title="Link to this heading">#</a></h4>
<p>The following <code class="docutils literal notranslate"><span class="pre">exchange-manager.properties</span></code> configuration example specifies HDFS
as the spooling storage destination.</p>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><code><span class="na">exchange-manager.name</span><span class="o">=</span><span class="s">hdfs</span>
<span class="na">exchange.base-directories</span><span class="o">=</span><span class="s">hadoop-master:9000/exchange-spooling-directory</span>
<span class="na">hdfs.config.resources</span><span class="o">=</span><span class="s">/usr/lib/hadoop/etc/hadoop/core-site.xml</span>
</code></pre></div>
</div>
<p>When you want use Hadoop-compatible file system as the spooling storage location,
you should enable <code class="docutils literal notranslate"><span class="pre">exchange.hdfs.skip-directory-scheme-validation</span></code> in <code class="docutils literal notranslate"><span class="pre">exchange-manager.properties</span></code>
when configure <code class="docutils literal notranslate"><span class="pre">exchange.base-directories</span></code> with a specific scheme instead of <code class="docutils literal notranslate"><span class="pre">hdfs</span></code> and the following steps
may be necessary.</p>
<ol class="arabic simple">
<li><p>Configure the <code class="docutils literal notranslate"><span class="pre">AbstractFileSystem</span></code> implementation in <code class="docutils literal notranslate"><span class="pre">core-site.xml</span></code>.</p></li>
<li><p>Add the relevant client JAR files into the directory <code class="docutils literal notranslate"><span class="pre">${Trino_HOME}/plugin/exchange-hdfs</span></code>
on all Trino cluster nodes.</p></li>
</ol>
<h4 id="local-filesystem-storage"><span id="fte-exchange-local-filesystem"></span>Local filesystem storage<a class="headerlink" href="#local-filesystem-storage" title="Link to this heading">#</a></h4>
<p>The following example <code class="docutils literal notranslate"><span class="pre">exchange-manager.properties</span></code> configuration specifies a
local directory, <code class="docutils literal notranslate"><span class="pre">/tmp/trino-exchange-manager</span></code>, as the spooling storage
destination.</p>
<div class="note admonition">
<p class="admonition-title">Note</p>
<p>It is only recommended to use a local filesystem for exchange in standalone,
non-production clusters. A local directory can only be used for exchange in
a distributed cluster if the exchange directory is shared and accessible
from all nodes.</p>
</div>
<div class="highlight-properties notranslate"><div class="highlight"><pre><span></span><code><span class="na">exchange-manager.name</span><span class="o">=</span><span class="s">filesystem</span>
<span class="na">exchange.base-directories</span><span class="o">=</span><span class="s">/tmp/trino-exchange-manager</span>
</code></pre></div>
</div>
<h2 id="adaptive-plan-optimizations">Adaptive plan optimizations<a class="headerlink" href="#adaptive-plan-optimizations" title="Link to this heading">#</a></h2>
<p>Fault-tolerant execution mode offers several adaptive plan
optimizations that adjust query execution plans dynamically based on
runtime statistics. For more information, see
<a class="reference internal" href="../optimizer/adaptive-plan-optimizations.html"><span class="doc std std-doc">Adaptive plan optimizations</span></a>.</p>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="graceful-shutdown.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Graceful shutdown">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Graceful shutdown
              </div>
            </div>
          </a>
        
        
          
          <a href="event-listeners-http.html" class="md-footer__link md-footer__link--next" aria-label="Next: HTTP event listener">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                HTTP event listener
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  
  
  <div class="md-footer-meta md-typeset">
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "content.tabs.link", "content.tooltipsnavigation.expand", "navigation.footer", "navigation.sections", "navigation.top", "navigation.tracking", "search.share", "search.suggest", "toc.integrate", "toc.follow"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike", "staticVersions": null, "versionPath": "../versions.json"}}</script>
    
      
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/sphinx_immaterial_theme.32136f45f91ae6956.min.js?v=a7a9472a"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=f281be69"></script>
    
  </body>
</html>